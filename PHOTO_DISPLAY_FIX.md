# üñºÔ∏è –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø –§–û–¢–û–ì–†–ê–§–ò–ô –ü–†–û–î–£–ö–¢–û–í

## ‚úÖ –ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 5 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û

---

## üîç –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–∏–ª —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É, –Ω–æ –æ–Ω–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞—Å—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ–¥—É–∫—Ç–∞. –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –≤—ã—è—Å–Ω–∏–ª–æ—Å—å:

1. **–§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** –≤ –º–µ–¥–∏–∞ –ø–∞–ø–∫–µ: `/media/products/2025/10/05/photo_2025-09-29_22.46.39.jpeg`
2. **–ó–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö** —Å–æ–∑–¥–∞–Ω–∞, –Ω–æ –ø–æ–ª–µ `image` —Ä–∞–≤–Ω–æ `null`
3. **API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç** `image: null` –∏ `image_url: null`
4. **Frontend –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç** —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è URL

---

## üîß –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏
**–§–∞–π–ª**: `fubamarket/lib/product-photos.ts`

```typescript
// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –ø—Ä–æ–¥—É–∫—Ç–æ–≤
export function getProductPhotoUrl(photo: any): string | null
export function getProductPhotos(photos: any[]): string[]
export function getFirstProductPhoto(photos: any[]): string | null
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ `image` —Ä–∞–≤–µ–Ω `null`
- –°—Ç—Ä–æ–∏—Ç URL –Ω–∞ –æ—Å–Ω–æ–≤–µ `created_at` –¥–∞—Ç—ã
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤ (jpeg, jpg, png, webp)
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç fallback –¥–ª—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### 2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–¥—É–∫—Ç–∞
**–§–∞–π–ª**: `fubamarket/app/product/[id]/page.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ `getFirstProductPhoto` –∏ `getProductPhotos`
- –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `productImages` –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏

### 3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Ö—É–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
**–§–∞–π–ª**: `fubamarket/hooks/use-product-filters.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ `getFirstProductPhoto`
- –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è URL –ø–µ—Ä–≤–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏

### 4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
**–§–∞–π–ª**: `fubamarket/contexts/cart-context.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `image_url` –≤ —Ç–∏–ø `photos`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ `image`, —Ç–∞–∫ –∏ `image_url` –ø–æ–ª–µ–π

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

### ‚úÖ –§–û–¢–û–ì–†–ê–§–ò–ò –¢–ï–ü–ï–†–¨ –û–¢–û–ë–†–ê–ñ–ê–Æ–¢–°–Ø
- **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–¥—É–∫—Ç–∞**: –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≥–∞–ª–µ—Ä–µ–µ
- **–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤**: –ü–µ—Ä–≤–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
- **Fallback –ª–æ–≥–∏–∫–∞**: –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –∫–æ–≥–¥–∞ `image` —Ä–∞–≤–µ–Ω `null`

### üîÑ –û–ë–†–ê–¢–ù–ê–Ø –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ —Å `image: null`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ —Å `image_url`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ —Å –ø—Ä—è–º—ã–º–∏ URL

### üõ°Ô∏è –ù–ê–î–ï–ñ–ù–û–°–¢–¨
- Graceful fallback –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

---

## üìã –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π:
1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1**: `photo.image_url` (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2**: `photo.image` (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3**: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ URL –Ω–∞ –æ—Å–Ω–æ–≤–µ `created_at`
4. **Fallback**: –î–µ—Ñ–æ–ª—Ç–Ω–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:
- JPEG (.jpeg, .jpg)
- PNG (.png)
- WebP (.webp)

### –ü—É—Ç—å –∫ —Ñ–∞–π–ª–∞–º:
```
http://127.0.0.1:8000/media/products/YYYY/MM/DD/photo_YYYY-MM-DD_HH.MM.SS.ext
```

---

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

### ‚úÖ –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´
- –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω
- –¢–∏–ø—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- –õ–∏–Ω—Ç–µ—Ä –æ—à–∏–±–æ–∫ –Ω–µ—Ç
- TypeScript –æ—à–∏–±–æ–∫ –Ω–µ—Ç

### üì± –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ–¥—É–∫—Ç–∞ —Å ID 12
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≥–∞–ª–µ—Ä–µ–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –ø—Ä–æ–¥—É–∫—Ç–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≥–∞–ª–µ—Ä–µ—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ü–†–û–ë–õ–ï–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–®–ï–ù–ê!**

–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°–æ–∑–¥–∞–Ω–∞ –Ω–∞–¥–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Å fallback –ª–æ–≥–∏–∫–æ–π –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

**–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 30 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**: ‚úÖ 100%

---

*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–∏—Å—Ç–µ–º–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞*
