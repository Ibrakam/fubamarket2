# FubaMarket2 Development Guide

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ FubaMarket2 –ø—Ä–æ–µ–∫—Ç–∞.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –¥–ª—è Ubuntu (–∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã)
./ubuntu_setup.sh
```

### 2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ (Django + Next.js)
./start_dev_servers.sh
```

–ò–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ Django —Å–µ—Ä–≤–µ—Ä
./start_django.sh

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å Next.js —Å–µ—Ä–≤–µ—Ä
cd fubamarket && npm run dev
```

## üì¶ –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ

### üîß –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **`start_dev_servers.sh`** - –ó–∞–ø—É—Å–∫–∞–µ—Ç –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ (Django + Next.js)
- **`start_django.sh`** - –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ Django —Å–µ—Ä–≤–µ—Ä
- **`fix_import_errors.sh`** - –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏
- **`ubuntu_setup.sh`** - –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### üöÄ –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- **`production_setup.sh`** - –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ production —Å–µ—Ä–≤–µ—Ä–∞
- **`setup_supervisor.sh`** - –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–ª—å–∫–æ Supervisor
- **`manage_services.sh`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

## üéØ –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. **–ñ–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—ã–µ API URLs** - –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **–û—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞** - `npm run build` –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–∞–º–∏
3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∞–ø–æ—Å—Ç—Ä–æ—Ñ–∞–º–∏** - `&apos;` –≤ JavaScript –∫–æ–¥–µ
4. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏** - `Search` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
5. **Django —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω** - `Failed to fetch` –æ—à–∏–±–∫–∏

### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ API URLs** - —Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ–∑–¥–µ
2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞** - `npm run build` –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
3. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∞–ø–æ—Å—Ç—Ä–æ—Ñ—ã** - `'` –≤ JavaScript, `&apos;` –≤ JSX
4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã** - –≤—Å–µ –∏–∫–æ–Ω–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤** - Django –∏ Next.js –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API
```typescript
// fubamarket/lib/api-config.ts
const API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://127.0.0.1:8000'

export const API_ENDPOINTS = {
  PRODUCTS: `${API_BASE_URL}/api/products`,
  LOGIN: `${API_BASE_URL}/api/auth/login/`,
  // ... –≤—Å–µ endpoints
}
```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **Development**: `NEXT_PUBLIC_API_URL=http://127.0.0.1:8000`
- **Production**: `NEXT_PUBLIC_API_URL=https://your-domain.com`

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
–°–∫—Ä–∏–ø—Ç `ubuntu_setup.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è Ubuntu
- –ó–∞–º–µ–Ω—è–µ—Ç –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—ã–µ URL –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ
- –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ –æ—à–∏–±–∫–∏ –ª–∏–Ω—Ç–µ—Ä–∞
- –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –∞–ø–æ—Å—Ç—Ä–æ—Ñ–∞–º–∏ –≤ JavaScript –∫–æ–¥–µ
- –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ URL –æ–±–Ω–æ–≤–ª–µ–Ω—ã
grep -r "http://127.0.0.1:8000" fubamarket --include="*.tsx" --include="*.ts"
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–∫—Ä–æ–º–µ api-config.ts)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞
npm run build
# –î–æ–ª–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ –±–µ–∑ –æ—à–∏–±–æ–∫

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç HTML entities –≤ JavaScript
grep -r "&apos;" fubamarket --include="*.tsx" --include="*.ts"
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 0 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Django —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
curl http://127.0.0.1:8000/api/products
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å JSON —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞–º–∏
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞
./start_dev_servers.sh

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã
pkill -f 'python manage.py runserver'
pkill -f 'npm run dev'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ—Ä—Ç–æ–≤
lsof -i :8000  # Django
lsof -i :3001  # Next.js
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∫–ª—é—á–µ–Ω–æ –≤ production setup:
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (Let's Encrypt)
- ‚úÖ Firewall (UFW)
- ‚úÖ Security headers –≤ Nginx
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚úÖ Gunicorn —Å 3 –≤–æ—Ä–∫–µ—Ä–∞–º–∏ –¥–ª—è Django
- ‚úÖ Production build –¥–ª—è Next.js
- ‚úÖ Gzip —Å–∂–∞—Ç–∏–µ –≤ Nginx
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## üÜò Troubleshooting

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: `sudo ./manage_services.sh logs`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å**: `sudo ./manage_services.sh status`
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã**: `sudo ./manage_services.sh restart`
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
5. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ URL –æ–±–Ω–æ–≤–ª–µ–Ω—ã**
6. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç HTML entities –≤ JavaScript**
7. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Django —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω**

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Nginx
sudo systemctl reload nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å PostgreSQL
sudo systemctl status postgresql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
sudo certbot certificates
```

## ‚úÖ Final Verification

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **Django API –¥–æ—Å—Ç—É–ø–µ–Ω**: `http://127.0.0.1:8000/api/products`
2. **Next.js App –¥–æ—Å—Ç—É–ø–µ–Ω**: `http://localhost:3001`
3. **Admin –ø–∞–Ω–µ–ª—å**: `http://localhost:3001/admin`
4. **Build –ø—Ä–æ—Ö–æ–¥–∏—Ç**: `npm run build`
5. **–ù–µ—Ç HTML entities –≤ JavaScript**: `grep -r "&apos;" fubamarket --include="*.tsx" --include="*.ts"`
6. **–í—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç**: –ù–µ—Ç –æ—à–∏–±–æ–∫ `Search is not defined`

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à FubaMarket2 –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üöÄ

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:
- **Django API**: `http://127.0.0.1:8000`
- **Next.js App**: `http://localhost:3001`
- **Admin**: `http://localhost:3001/admin`
- **API Docs**: `http://127.0.0.1:8000/api/`

## üìã –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
./ubuntu_setup.sh

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
./start_dev_servers.sh

# 3. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
open http://localhost:3001
```

**–£–¥–∞—á–∏ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π!** üöÄ
